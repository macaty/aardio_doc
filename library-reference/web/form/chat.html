
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio 编程语言文档 - web.form.chat 库模块帮助文档'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio 编程语言文档 - web.form.chat 库模块帮助文档</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio 编程语言文档首页"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio 文档</span></a>
<h1>web.form.chat 库模块帮助文档</h1>

<p><a id="web.form"></a></p>

<h2>web.form 成员列表</h2>

<p><a id="web.form.chat"></a></p>

<h3>web.form.chat</h3>

<p>用于显示 Markdown 生成的 HTML 的 AI 助手专用 web 窗体。<br>
此对象继承自 web.form.simpleMarkdown 与 web.form 对象。</p>

<p>创建用于显示 Markdown 生成的 HTML 的 AI 助手专用 web 窗体。<br>
此对象继承自 web.form.simpleMarkdown 与 web.form 对象。</p>

<p><a id="web.form.chat"></a></p>

<h3>web.form.chat()</h3>

<p><a href="#webFormChatObject">返回对象:webFormChatObject</a></p>

<p><a id="web.form.chat"></a></p>

<h3>web.form.chat(winform,hostFlags,dlControl,userAgent,securityTrusted)</h3>

<p>创建 Web 窗体。<br>
winform 必须指定窗体或 custom 控件。<br>
其他参数不必指定，这些参数的用法请参考 web.form 。</p>

<p><a id="webFormChatObject"></a></p>

<h2>webFormChatObject 成员列表</h2>

<p><a id="webFormChatObject.assistant"></a></p>

<h3>webFormChatObject.assistant(增量文本)</h3>

<p>显示并记录 AI 接口返回的增量文本。<br>
参数必须是文本或者表示输出完成的 null 值。</p>

<p><a id="webFormChatObject.beforerWriteEnd"></a></p>

<h3>webFormChatObject.beforerWriteEnd</h3>

<pre><code class="aardio language-aardio">webFormChatObject.beforerWriteEnd = function(markdown){
    /*在输出完整回复以前，可在此回调中修改返回输出的全部 Markdown。  
错误输出不会触发此函数。*/
}
</code></pre>

<p><a id="webFormChatObject.clear"></a></p>

<h3>webFormChatObject.clear()</h3>

<p>清除会话记录</p>

<p><a id="webFormChatObject.errorMessage"></a></p>

<h3>webFormChatObject.errorMessage(错误信息)</h3>

<p>显示错误信息</p>

<p><a id="webFormChatObject.getMarkdown"></a></p>

<h3>webFormChatObject.getMarkdown()</h3>

<p>返回输出到页面的所有 Markdown 格式内容。</p>

<p><a id="webFormChatObject.lastAssistantMessage"></a></p>

<h3>webFormChatObject.lastAssistantMessage()</h3>

<p>AI 最后一次返回的消息，如果没有则返回 null。</p>

<p><a id="webFormChatObject.lastMarkdown"></a></p>

<h3>webFormChatObject.lastMarkdown()</h3>

<p>获取最后一次 AI 回复的原始 Markdown 格式内容。</p>

<p><a id="webFormChatObject.onWriteEnd"></a></p>

<h3>webFormChatObject.onWriteEnd</h3>

<pre><code class="aardio language-aardio">webFormChatObject.onWriteEnd = function(){
    /*发出问题以后，AI 回复完成或出现错误回调此事件*/
}
</code></pre>

<p><a id="webFormChatObject.prompt"></a></p>

<h3>webFormChatObject.prompt(提示词)</h3>

<p>添加并显示用户提示词</p>

<p><a id="webFormChatObject.setMarkdown"></a></p>

<h3>webFormChatObject.setMarkdown()</h3>

<p>输出 Markdown 格式内容到页面，覆盖控件存储的 Markdown。</p>

<p><a id="webFormChatObject.showLoading"></a></p>

<h3>webFormChatObject.showLoading(title)</h3>

<p>显示加载动画，可选用 title 指定标题。</p>

<p><a id="webFormChatObject.started"></a></p>

<h3>webFormChatObject.started()</h3>

<p>是否已经发起对话。<br>
发起对话指的是消息队列中包含非 system 角色的消息。</p>

<p><a id="webFormChatObject.system"></a></p>

<h3>webFormChatObject.system(提示词)</h3>

<p>添加并显示系统提示词</p>

<p><a id="webFormChatObject.write"></a></p>

<h3>webFormChatObject.write()</h3>

<p>清空页面内容，解析并显示参数 @1 指定的 Markdown 为网页。<br>
控件仅解析与显示 Markdown，不会存储此 Markdown，<br>
也不会改变  getMarkdown 函数的返回值。</p>

<p><a id="webFormChatObject.writeDelta"></a></p>

<h3>webFormChatObject.writeDelta()</h3>

<p>向页面追加 Markdown 格式内容。<br>
解析、显示、并存储写入的 Markdown。</p>

<p><a id="webFormChatObject.chatMessage"></a></p>

<h2>webFormChatObject.chatMessage 成员列表</h2>

<p>消息队列，用于发送到 chat/completions 聊天接口。</p>

<p><a id="webFormChatObject.chatMessage.limit"></a></p>

<h3>webFormChatObject.chatMessage.limit</h3>

<p>可选指定一个限制消息队列大小的数值。<br>
limit 限制的队列大小不包含第一个系统提示词与最后一次抓取网址后发送的知识库。<br>
但其他通过抓取网址发送的知识库消息会计算在内（在页面上不显示）。</p>

<p><a href="https://www.aardio.com/zh-cn/doc/library-reference/web/form/chat.md">Markdown 格式</a></p>

</body> 
</html>