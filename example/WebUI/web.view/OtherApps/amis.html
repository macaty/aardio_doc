
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - WebView2 - è°ƒç”¨ amis'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - WebView2 - è°ƒç”¨ amis</title> 
<link rel="stylesheet" href="../../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: WebView2 - è°ƒç”¨ amis</h1><pre><code class="aardio language-aardio">//amis ä½ä»£ç æ¡†æ¶
import win.ui;
/*DSG{{*/
var winform = win.form(text=&quot;WebView2 - è°ƒç”¨ amis&quot;;right=966;bottom=622)
winform.add()
/*}}*/

import web.view;
var wb = web.view(winform);

//å¯¼å‡º JS å‡½æ•°
wb.export({ 
    //æ³¨æ„ aardio å‡½æ•°åœ¨ JS ä¸­è¿”å› Promise 
    getAmisJson  = function(){
        return {
            &quot;type&quot;:&quot;page&quot;,
            &quot;title&quot;:&quot;è¡¨å•é¡µé¢&quot;, 
             &quot;body&quot;: { {
                &quot;type&quot;:&quot;form&quot;,
                &quot;mode&quot;:&quot;horizontal&quot;,
                &quot;api&quot;:&quot;/saveForm.aardio&quot;,
                &quot;body&quot;:{
                    {&quot;type&quot;:&quot;input-text&quot;,&quot;name&quot;:&quot;name&quot;,&quot;label&quot;:&quot;Name&quot;,&quot;required&quot;:true},
                    {&quot;type&quot;:&quot;input-email&quot;,&quot;name&quot;:&quot;email&quot;,&quot;label&quot;:&quot;Email&quot;,&quot;required&quot;:true},
                    {&quot;type&quot;:&quot;static-tpl&quot;,&quot;tpl&quot;:&quot;ç”Ÿæˆçš„idä¸ºï¼š${id}&quot;}
                }, 

            },
            {
                &quot;type&quot;: &quot;button&quot;,
                &quot;label&quot;: &quot;è°ƒç”¨ aardio å‡½æ•°&quot;,
                &quot;onEvent&quot;: {
                    &quot;click&quot;: {
                        &quot;actions&quot;: {
                            {
                                &quot;actionType&quot;: &quot;custom&quot;,
                                &quot;script&quot;: &quot;window.aardioMsgbox(&#39;ç½‘é¡µè°ƒç”¨ aardio å‡½æ•°&#39;)&quot;
                            }
                        }
                    },
                },

            } } 
        };
    }; 

    amisCopy = function(content,format){

        import win.clip.html;
        if(format==&quot;text/html&quot;){
            win.clip.html().write(content);
        }
        else {
            win.clip.write(content)
        } 
    };

    aardioMsgbox = function(str){ 
        winform.msgbox(str,&quot;JS è°ƒç”¨ aardio&quot;);
    };
})


import wsock.tcp.asynHttpServer;
var httpServer = wsock.tcp.asynHttpServer(); 
httpServer.run( {
    [&quot;/index.html&quot;] = /**
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;zh&quot;&gt;
    &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt; 
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://lib.baomitu.com/amis/6.2.2/antd.min.css&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://lib.baomitu.com/amis/6.2.2/helper.min.css&quot; /&gt;
    &lt;script src=&quot;https://lib.baomitu.com/amis/6.2.2/sdk.min.js&quot;&gt;&lt;/script&gt;
    &lt;style&gt; html, body, .app-wrapper { position: relative; width: 100%; height: 100%; margin: 0; padding: 0; }  &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;div id=&quot;root&quot; class=&quot;app-wrapper&quot;&gt;&lt;/div&gt;

    &lt;script type=&quot;text/javascript&quot;&gt;
        (async function () {
        let amis = amisRequire(&#39;amis/embed&#39;);
        let amisJson = await getAmisJson(); 
        let amisScoped = amis.embed(&#39;#root&#39;, amisJson,{},{
            theme: &#39;antd&#39;,//https://github.com/baidu/amis/issues/2465
            copy: (content,{format}) =&gt; { amisCopy(content,format) },
        });
        })();
    &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
**/;
    [&quot;/saveForm.aardio&quot;] = function(response,request){

        //è¯»å–è¡¨å•è¯·æ±‚å‘é€çš„æ•°æ®ï¼Œè¿”å›å€¼å·²è§£æä¸º aardio å¯¹è±¡
        var data = request.postJson();

        response.write({
            &quot;status&quot;: 0,
                &quot;msg&quot;: &quot;ä¿å­˜æˆåŠŸ&quot;,
                &quot;data&quot;: { &quot;id&quot;:  ..math.random(1,200) } 
        }) 
    };
}); 

//éœ€è¦é€šè¿‡HTTPæœåŠ¡å™¨è®¿é—®æ‰èƒ½æ”¯æŒ localStorage( ä¹Ÿå¯ä»¥æŒ‡å®šèµ„æºæ–‡ä»¶å†…å“åº” HTTP è¯·æ±‚çš„ aardio ä»£ç è·¯å¾„ ï¼‰ã€‚
wb.go( httpServer.getUrl(&quot;index.html&quot;) ) 

winform.show();
win.loopMessage();
</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/WebUI/web.view/OtherApps/amis.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ·şÎñÆ÷±¨¸æ·ÃÎÊµÄÎÄ¼şÊÇÒş²ØµÄ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/WebUI/web.view/OtherApps/amis.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/WebUI/web.view/OtherApps/amis.md">Markdown æ ¼å¼</a>
</body> 
</html>