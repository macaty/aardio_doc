
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - åˆ—è¡¨è§†å›¾ï¼ˆlistviewï¼‰æ§ä»¶ - å“åº”äº‹ä»¶'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - åˆ—è¡¨è§†å›¾ï¼ˆlistviewï¼‰æ§ä»¶ - å“åº”äº‹ä»¶</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: åˆ—è¡¨è§†å›¾ï¼ˆlistviewï¼‰æ§ä»¶ - å“åº”äº‹ä»¶</h1><pre><code class="aardio language-aardio">//åˆ—è¡¨è§†å›¾ï¼ˆlistviewï¼‰æ§ä»¶ - å“åº”äº‹ä»¶
import win.ui;
import win.ui.menu;
/*DSG{{*/
var winform = win.form(text=&quot;aardio form&quot;;right=507;bottom=422;)
winform.add(
listview={cls=&quot;listview&quot;;left=16;top=38;right=476;bottom=319;acceptfiles=1;asel=false;bgcolor=16777215;dl=1;dr=1;edge=1;font=LOGFONT(name=&#39;SimSun&#39;);fullRow=1;gridLines=1;msel=false;z=1};
static={cls=&quot;static&quot;;text=&quot;è¯·ä½¿ç”¨é¼ æ ‡å·¦é”®ã€é¼ æ ‡å³é”®ç‚¹å‡»åˆ—è¡¨é¡¹&quot;;left=17;top=9;right=290;bottom=27;transparent=1;z=2}
)
/*}}*/

//å½“å‰ç„¦ç‚¹é¡¹å˜æ›´æ—¶è§¦å‘æ­¤äº‹ä»¶
winform.listview.onFocusedChanged = function(item,subItem,nmListView){
    winform.static.text = &quot;é€‰ä¸­äº†&quot; +  winform.listview.getItemText(item,subItem) 
}

//å³é”®ç‚¹å‡»åˆ—è¡¨é¡¹è§¦å‘æ­¤äº‹ä»¶
winform.listview.onRightClick = function(item,subItem,nmListView){
    winform.popmenu.popup();//å¼¹å‡ºèœå•
}

//åˆ›å»ºå¼¹å‡ºèœå•
winform.popmenu = win.ui.popmenu(winform);
winform.popmenu.add(&#39;åˆ é™¤&#39;,function(id){
    //åœ¨ä¸‹é¢è¾“å…¥èœå•å“åº”ä»£ç 
    winform.listview.delItem( winform.listview.selIndex )
});

//æ¥å—æ‹–æ”¾æ–‡ä»¶å¹¶ä¿®æ”¹æŒ‡å®šåˆ—
winform.listview.wndproc = function(hwnd,message,wParam,lParam){
    select(message) { 
        case 0x233/*_WM_DROPFILES*/{ 
            var path = win.getDropFile(wParam )[1];  
            var row,col = winform.listview.hitTest();
            if( row ) winform.listview.setItemText(path,row,col);
        } 
    }
}

//è‡ªé€‚åº”åˆ—å®½åº¦ 
winform.listview.adjust = function(cx,cy){
    winform.listview.fillParent(/*åˆ—åºå·*/);
} 

winform.listview.insertColumn(&quot;åˆ—æ ‡é¢˜2&quot;,100,,0/*_LVCFMT_LEFT*/) 
winform.listview.insertColumn(&quot;åˆ—æ ‡é¢˜1&quot;,100,,0/*_LVCFMT_LEFT*/) //ç¬¬äºŒåˆ—å¼€å§‹å¯ä»¥ä½¿ç”¨_LVCFMT_CENTERå±…ä¸­

winform.listview.addItem( { 
    text={&quot;ç¬¬ä¸€è¡Œå†…å®¹&quot;;&quot;yes&quot;} 
} )
winform.listview.addItem(&quot;ç¬¬äºŒè¡Œå†…å®¹&quot;)
winform.listview.addItem(&quot;ç¬¬ä¸‰è¡Œå†…å®¹&quot;) 

winform.listview.setItemText(&quot;æ”¹å˜ç¬¬ä¸‰è¡Œ&quot;,3)
winform.listview.setItemText( {
    &quot;æ”¹å˜ç¬¬äºŒè¡Œ&quot;;&quot;ç¬¬äºŒåˆ—&quot;
},2);

//å“åº”é€šçŸ¥åŒå‡» listview æ§ä»¶æ·»åŠ ä¸‹é¢çš„ä»£ç  
winform.listview.onnotify = function(id,code,ptr){ 
    select(code) {
        case 0xFFFFFF94/*_LVN_COLUMNCLICK*/ {
            var nm = winform.listview.getNotifyMessage(code,ptr)
            var desc = winform.listview.getColumnImage(nm.iSubItem) == 0; 
            winform.static.text = &quot;è¯·å‚è€ƒ win.ui.grid æºç å¤„ç†æ’åº&quot; 
        } 
    } 
}

/*
winform.listview.onnotify çš„ code å‚æ•°ï¼š

_LVN_BEGINDRAG é¼ æ ‡å·¦é”®æ­£åœ¨è¢«è§¦å‘ä»¥ä¾¿è¿›è¡Œæ‹–æ”¾æ“ä½œ(å½“é¼ æ ‡å·¦é”®å¼€å§‹æ‹–æ‹½åˆ—è¡¨è§†å›¾æ§ä»¶ä¸­çš„é¡¹ç›®æ—¶äº§ç”Ÿ)
_LVN_BEGINRDRAG é¼ æ ‡å³é”®æ­£åœ¨è¢«è§¦å‘ä»¥ä¾¿è¿›è¡Œæ‹–æ”¾æ“ä½œ(å½“é¼ æ ‡å³é”®å¼€å§‹æ‹–æ‹½åˆ—è¡¨è§†å›¾æ§ä»¶ä¸­çš„é¡¹ç›®æ—¶äº§ç”Ÿ)
_LVN_BEGINLABELEDIT å¼€å§‹ç¼–è¾‘é¡¹çš„æ–‡æœ¬
_LVN_COLUMNCLICK å•å‡»åˆ—(å½“é¼ æ ‡å•å‡»åˆ—è¡¨è§†å›¾æ§ä»¶åˆ—æ ‡é¢˜æ—¶äº§ç”Ÿ)
_NM_CLICK å½“é¼ æ ‡å•å‡»åˆ—è¡¨è§†å›¾æ§ä»¶æ—¶äº§ç”Ÿ
_LVN_COLUMNCLICK å•å‡»åˆ—
_LVN_DELETEALLITEMS åˆ é™¤æ‰€æœ‰é¡¹
_LVN_DELETEITEM åˆ é™¤æŸä¸ªé¡¹
_NM_DBLCLK å½“é¼ æ ‡åŒå‡»åˆ—è¡¨è§†å›¾æ§ä»¶æ—¶äº§ç”Ÿ
_LVN_ENDLABELEDIT ç»“æŸå¯¹é¡¹æ–‡æœ¬çš„ç¼–è¾‘
_LVN_GETDISPINFO è¯·æ±‚éœ€è¦æ˜¾ç¤ºçš„ä¿¡æ¯
_LVN_GETINFOTIP è¯·æ±‚æ˜¾ç¤ºåœ¨å·¥å…·æç¤ºçª—å£å†…çš„é™„åŠ çš„æ–‡æœ¬ä¿¡æ¯
_LVN_HOTTRACK é¼ æ ‡æ»‘è¿‡æŸä¸ªé¡¹
_LVN_INSERTITEM å½“å‘åˆ—è¡¨è§†å›¾æ§ä»¶æ’å…¥é¡¹ç›®æ—¶äº§ç”Ÿ
_LVN_ITEMACTIVATE æ¿€æ´»æŸä¸ªé¡¹
_LVN_ITEMCHANGED æŸä¸ªé¡¹å·²ç»å‘ç”Ÿå˜åŒ–
_LVN_ITEMCHANGING æŸä¸ªé¡¹ç›®æ­£åœ¨å‘ç”Ÿå˜åŒ–
_NM_KILLFOCUS å½“è§†è¡¨åˆ—å›¾æ§ä»¶å¤±å»ç„¦ç‚¹æ—¶äº§ç”Ÿ
_LVN_KEYDOWN æŸä¸ªé”®è¢«æŒ‰ä¸‹
_LVN_MARQUEEBEGIN å¼€å§‹æŸä¸ªè¾¹æ¡†é€‰æ‹©
_NM_OUTOFMEMORY å½“å†…å­˜æº¢å‡ºæ—¶äº§ç”Ÿ
_LVN_ODCACHEHINT è™šæ‹Ÿåˆ—è¡¨æ§ä»¶çš„æ˜¾ç¤ºåŒºåŸŸçš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–
_LVN_ODSTATECHANGED è™šæ‹Ÿåˆ—è¡¨çš„æ§ä»¶çš„æŸä¸ªé¡¹æˆ–æŸä¸ªèŒƒå›´å†…çš„é¡¹å·²ç»å‘ç”Ÿå˜åŒ–
_LVN_ODFINDITEM éœ€è¦æ‹¥æœ‰è€…æŸ¥æ‰¾ä¸€ä¸ªç‰¹å®šçš„å›è°ƒé¡¹
_NM_RCLICK å½“é¼ æ ‡å³é”®å•å‡»åˆ—è¡¨è§†å›¾æ§ä»¶æ—¶äº§ç”Ÿ
_NM_RDBLCLK å½“é¼ æ ‡å³é”®åŒå‡»åˆ—è¡¨è§†å›¾æ§ä»¶æ—¶äº§ç”Ÿ
_NM_SETFOCUS å½“åˆ—è¡¨è§†å›¾æ§ä»¶è·å¾—ç„¦ç‚¹æ—¶äº§ç”Ÿ
_LVN_SETDISPINFO çˆ¶çª—å£å¿…é¡»æ›´æ–°æ§ä»¶ä¸ºé¡¹æ‰€ç»´æŠ¤çš„ä¿¡
*/

winform.show(); 
win.loopMessage();
</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/Windows/ListView/listview.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ·şÎñÆ÷±¨¸æ·ÃÎÊµÄÎÄ¼şÊÇÒş²ØµÄ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/Windows/ListView/listview.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/Windows/ListView/listview.md">Markdown æ ¼å¼</a>
</body> 
</html>