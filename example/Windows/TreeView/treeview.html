
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - æ ‘è§†å›¾ï¼ˆtreeviewï¼‰æ§ä»¶ - å…¥é—¨ç¤ºä¾‹'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - æ ‘è§†å›¾ï¼ˆtreeviewï¼‰æ§ä»¶ - å…¥é—¨ç¤ºä¾‹</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: æ ‘è§†å›¾ï¼ˆtreeviewï¼‰æ§ä»¶ - å…¥é—¨ç¤ºä¾‹</h1><pre><code class="aardio language-aardio">//æ ‘è§†å›¾ï¼ˆtreeviewï¼‰æ§ä»¶ - å…¥é—¨ç¤ºä¾‹
import win.ui;
/*DSG{{*/
var winform = win.form(text=&quot;aardio form&quot;;right=349;bottom=249;)
winform.add(
treeview={cls=&quot;treeview&quot;;left=22;top=17;right=326;bottom=230;asel=false;bgcolor=15793151;db=1;dl=1;dt=1;edge=1;hscroll=1;infoTip=1;vscroll=1;z=1}
)
/*}}*/

import win.ui.menu;

//é€‰ä¸­æ ‘è§†å›¾ï¼ˆtreeviewï¼‰èŠ‚ç‚¹å˜æ›´è§¦å‘ onSelChanged äº‹ä»¶
winform.treeview.onSelChanged = function(hItem,data,nmTreeView){
    var data  = winform.treeview.getItemData(hItem);

    if( data ) winform.text = tostring(data)
    else winform.text = winform.treeview.getItemText(hItem);    
}

//å³é”®ç‚¹å‡»æ ‘è§†å›¾ï¼ˆtreeviewï¼‰è§¦å‘ onRightClick äº‹ä»¶
winform.treeview.onRightClick = function(hItem,data){
    winform.treeview.setSelected(hItem);

    var menu = win.ui.popmenu(winform)
    menu.add(&quot;åˆ é™¤&quot;,
        function(){ 
            winform.treeview.delItem(hItem)
        }
    )
    menu.popup(x,y,true);       
}

//å¤„ç†æ ‘è§†å›¾ï¼ˆtreeviewï¼‰é€šçŸ¥äº‹ä»¶ï¼Œå®é™…ä¸Šä¸Šé¢çš„ onSelChangedï¼ŒonRightClick éƒ½æ¥è‡ªæ§ä»¶é¢„å¤„ç†çš„é€šçŸ¥äº‹ä»¶ã€‚
winform.treeview.onnotify = function(id,code,ptr){

    if( code == 0xFFFFFFF4/*_NM_CUSTOMDRAW*/ ){ //æ¥ç‚¹è‡ªç»˜
        var lvcd = winform.treeview.getNotifyCustomDraw(code,ptr); 
        if( lvcd.nmcd.dwDrawStage == 1/*_CDDS_PREPAINT*/ ){
            return 0x20/*_CDRF_NOTIFYITEMDRAW*/;
        }
        elseif( lvcd.nmcd.dwDrawStage == 0x10001/*_CDDS_ITEMPREPAINT*/ ){
            select(lvcd.iLevel) {
                case 0{
                    if (lvcd.nmcd.uItemState == ( 0x10/*_CDIS_FOCUS*/ | 1/*_CDIS_SELECTED*/)) 
                        lvcd.clrText = gdi.RGB(255, 255, 255);
                    else    
                        lvcd.clrText = gdi.RGB(0, 0, 255); 
                }
                case 1 {
                    if (lvcd.nmcd.uItemState == ( 0x10/*_CDIS_FOCUS*/ | 1/*_CDIS_SELECTED*/)) 
                        lvcd.clrText = gdi.RGB(255, 255, 255);
                    else    
                        lvcd.clrText = gdi.RGB(255, 0, 0);
                }
            } 
            lvcd.update() 
            return 0/*_CDRF_DODEFAULT*/
        }
    }
}

var hitem = winform.treeview.insertItem( text=&quot;ç¨‹åºç›®å½•&quot; );
var hSubItem = winform.treeview.insertItem( { text=&quot;å­ç›®å½•&quot; },hitem/*çˆ¶èŠ‚ç‚¹*/); 

var hitem = winform.treeview.insertItem( { 
    text = &quot;ä¸‹é¢ç”¨ä¸€ä¸ªæ•°ç»„æŒ‡å®šå­èŠ‚ç‚¹&quot;; { 
        {  text = &quot;å­èŠ‚ç‚¹1&quot;  };
        {  text = &quot;å­èŠ‚ç‚¹2&quot; };
        {  text = &quot;ä¸‹é¢ç”¨ä¸€ä¸ªæ•°ç»„æŒ‡å®šå­èŠ‚ç‚¹&quot;; {
            &quot;a&quot;;&quot;b&quot;;&quot;c&quot;;{ text = &quot;d&quot; } 
           }
        };
    }
} ) 

import string.xml;
xmlstr =  /* 
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;project ver=&quot;10&quot; name=&quot;aardioå·¥ç¨‹3&quot; libEmbed=&quot;true&quot; icon=&quot;...&quot;&gt;
    &lt;file name=&quot;main.aardio&quot; path=&quot;main.aardio&quot; &gt;  
    &lt;/file&gt;
    &lt;folder name=&quot;èµ„æºæ–‡ä»¶&quot; path=&quot;res&quot; embed=&quot;true&quot;&gt;
        &lt;file name=&quot;test.aardio&quot; path=&quot;test.aardio&quot; &gt;  
    &lt;/folder&gt;
    &lt;folder name=&quot;åº“&quot; path=&quot;lib&quot;&gt; &lt;/folder&gt; 
&lt;/project&gt; 
*/ 
xmlDoc = string.xml( xmlstr )
winform.treeview.insertItem( xmlDoc ) //ç›´æ¥æŠŠXMLåŠ è½½åˆ°æ ‘å½¢æ§ä»¶ä¸­, winform.treeview.getItemData(hItem) è·å–èŠ‚ç‚¹å¯¹åº”çš„XMLæ•°æ®
/*
winform.treeview.insertItem çš„å‚æ•°@1å¯ä»¥ä½¿ç”¨ä½¿ç”¨string.xmlå¯¹è±¡,
æˆ–è€…ä½¿ç”¨ç›¸åŒç»“æ„çš„æ™®é€šæ•°æ®è¡¨å¯¹è±¡,æ¯ä¸ªèŠ‚ç‚¹å¯¹è±¡å¿…é¡»æŒ‡å®štagNameæˆ–textå±æ€§,
treeviewæŒ‰text,label,title,name,tagNameçš„é¡ºåºç¡®å®šæ˜¾ç¤ºæ ‡é¢˜.

æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç”¨æ•°ç»„åŒ…å«å­èŠ‚ç‚¹(ä½†èŠ‚ç‚¹æœ¬èº«å¿…é¡»æŒ‡å®štagNameæˆ–textå±æ€§)
ä¹Ÿå¯ä»¥ä½¿ç”¨childrenæˆå‘˜æŒ‡å‘ä¸€ä¸ªæ•°ç»„è¡¨ç¤ºå¤šä¸ªå­èŠ‚ç‚¹

å¯ä»¥å‚è€ƒ fsys.asar.reader æä¾›çš„treeDataå‡½æ•°è¿”å›çš„æ•°æ®è¡¨,
å°±å¯ä»¥ç›´æ¥åœ¨treeviewä¸­åŠ è½½å¹¶æ˜¾ç¤ºã€‚
*/

winform.show() 
win.loopMessage();

</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/Windows/TreeView/treeview.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ·şÎñÆ÷±¨¸æ·ÃÎÊµÄÎÄ¼şÊÇÒş²ØµÄ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/Windows/TreeView/treeview.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/Windows/TreeView/treeview.md">Markdown æ ¼å¼</a>
</body> 
</html>